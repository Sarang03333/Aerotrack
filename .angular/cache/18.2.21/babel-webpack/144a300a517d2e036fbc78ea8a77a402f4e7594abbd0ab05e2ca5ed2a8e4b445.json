{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../core/services/spares.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/router\";\nconst _c0 = (a0, a1) => ({\n  \"warn\": a0,\n  \"ok\": a1\n});\nconst _c1 = a0 => [\"/spares\", a0, \"edit\"];\nfunction SparesListComponent_tr_29_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\")(12, \"span\", 11);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"td\")(15, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function SparesListComponent_tr_29_Template_button_click_15_listener() {\n      const p_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.replenish(p_r2.partID));\n    });\n    i0.ɵɵtext(16, \"Replenish\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"a\", 13);\n    i0.ɵɵtext(18, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function SparesListComponent_tr_29_Template_button_click_19_listener() {\n      const p_r2 = i0.ɵɵrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.remove(p_r2.partID));\n    });\n    i0.ɵɵtext(20, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const p_r2 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r2.partID);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r2.quantityAvailable);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r2.reorderLevel);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r2.lastUpdated);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(9, _c0, ctx_r2.isLow(p_r2), !ctx_r2.isLow(p_r2)));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r2.isLow(p_r2) ? \"LOW\" : \"OK\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r2.isLow(p_r2));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(12, _c1, p_r2.partID));\n  }\n}\nfunction SparesListComponent_tr_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\", 15);\n    i0.ɵɵtext(2, \"No parts found\");\n    i0.ɵɵelementEnd()();\n  }\n}\nexport let SparesListComponent = /*#__PURE__*/(() => {\n  class SparesListComponent {\n    constructor(svc) {\n      this.svc = svc;\n      this.term = '';\n      this.lowOnly = false;\n      this.parts = [];\n    }\n    ngOnInit() {\n      this.refresh();\n      this.svc.list().subscribe(() => this.refresh());\n    }\n    refresh() {\n      const t = (this.term || '').toLowerCase();\n      const all = this.svc.getValue().filter(p => !t || p.partID.toLowerCase().includes(t) || p.name.toLowerCase().includes(t));\n      this.parts = this.lowOnly ? all.filter(p => this.svc.isLowStock(p)) : all;\n    }\n    clear() {\n      this.term = '';\n      this.lowOnly = false;\n      this.refresh();\n    }\n    replenish(id) {\n      this.svc.replenish(id);\n      this.refresh();\n    }\n    remove(id) {\n      if (confirm(`Delete part ${id}?`)) this.svc.remove(id);\n      this.refresh();\n    }\n    isLow(p) {\n      return this.svc.isLowStock(p);\n    }\n    static {\n      this.ɵfac = function SparesListComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || SparesListComponent)(i0.ɵɵdirectiveInject(i1.SparesService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: SparesListComponent,\n        selectors: [[\"app-spares-list\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 31,\n        vars: 4,\n        consts: [[1, \"toolbar\"], [1, \"search-filters\"], [\"type\", \"text\", \"placeholder\", \"Search by PartID or Name\", 1, \"input\", 3, \"ngModelChange\", \"input\", \"ngModel\"], [2, \"display\", \"flex\", \"align-items\", \"center\", \"gap\", \".35rem\"], [\"type\", \"checkbox\", 3, \"ngModelChange\", \"change\", \"ngModel\"], [1, \"btn\", \"secondary\", 3, \"click\"], [\"routerLink\", \"/spares/new\", 1, \"btn\"], [1, \"card\"], [1, \"table\"], [4, \"ngFor\", \"ngForOf\"], [4, \"ngIf\"], [1, \"badge\", 3, \"ngClass\"], [1, \"btn\", \"accent\", 3, \"click\", \"disabled\"], [1, \"btn\", \"secondary\", 3, \"routerLink\"], [1, \"btn\", \"danger\", 3, \"click\"], [\"colspan\", \"7\", 2, \"text-align\", \"center\", \"color\", \"var(--muted)\"]],\n        template: function SparesListComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"input\", 2);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SparesListComponent_Template_input_ngModelChange_2_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.term, $event) || (ctx.term = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"input\", function SparesListComponent_Template_input_input_2_listener() {\n              return ctx.refresh();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"label\", 3)(4, \"input\", 4);\n            i0.ɵɵtwoWayListener(\"ngModelChange\", function SparesListComponent_Template_input_ngModelChange_4_listener($event) {\n              i0.ɵɵtwoWayBindingSet(ctx.lowOnly, $event) || (ctx.lowOnly = $event);\n              return $event;\n            });\n            i0.ɵɵlistener(\"change\", function SparesListComponent_Template_input_change_4_listener() {\n              return ctx.refresh();\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵtext(5, \" Show Low Stock Only\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"button\", 5);\n            i0.ɵɵlistener(\"click\", function SparesListComponent_Template_button_click_6_listener() {\n              return ctx.clear();\n            });\n            i0.ɵɵtext(7, \"Reset\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(8, \"a\", 6);\n            i0.ɵɵtext(9, \"+ Add Part\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(10, \"div\", 7)(11, \"table\", 8)(12, \"thead\")(13, \"tr\")(14, \"th\");\n            i0.ɵɵtext(15, \"Part ID\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"th\");\n            i0.ɵɵtext(17, \"Name\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"th\");\n            i0.ɵɵtext(19, \"Qty Available\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"th\");\n            i0.ɵɵtext(21, \"Reorder Level\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"th\");\n            i0.ɵɵtext(23, \"Last Updated\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(24, \"th\");\n            i0.ɵɵtext(25, \"Status\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(26, \"th\");\n            i0.ɵɵtext(27, \"Actions\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(28, \"tbody\");\n            i0.ɵɵtemplate(29, SparesListComponent_tr_29_Template, 21, 14, \"tr\", 9)(30, SparesListComponent_tr_30_Template, 3, 0, \"tr\", 10);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(2);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.term);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtwoWayProperty(\"ngModel\", ctx.lowOnly);\n            i0.ɵɵadvance(25);\n            i0.ɵɵproperty(\"ngForOf\", ctx.parts);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.parts.length === 0);\n          }\n        },\n        dependencies: [CommonModule, i2.NgClass, i2.NgForOf, i2.NgIf, FormsModule, i3.DefaultValueAccessor, i3.CheckboxControlValueAccessor, i3.NgControlStatus, i3.NgModel, RouterModule, i4.RouterLink],\n        encapsulation: 2\n      });\n    }\n  }\n  return SparesListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}