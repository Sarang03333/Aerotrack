{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./maintenance.service\";\nimport * as i2 from \"./audit.service\";\nexport let ReportsService = /*#__PURE__*/(() => {\n  class ReportsService {\n    constructor(m, a) {\n      this.m = m;\n      this.a = a;\n    }\n    generate() {\n      const tasks = this.m.getValue();\n      const completed = tasks.filter(t => t.status === 'COMPLETED').length;\n      const inprog = tasks.filter(t => t.status === 'IN_PROGRESS').length;\n      const pending = tasks.filter(t => t.status === 'PENDING').length;\n      const downtimeHours = inprog * 2 + pending * 4; // mock formula\n      const costAnalysis = completed * 1200 + inprog * 800 + pending * 400; // mock costs\n      const safetyPerformance = Math.max(0, 100 - this.a.getValue().length * 2); // mock metric\n      const report = {\n        reportID: `FR-${Math.floor(1000 + Math.random() * 9000)}`,\n        metrics: {\n          costAnalysis,\n          safetyPerformance,\n          downtimeHours\n        },\n        generatedDate: new Date().toISOString().slice(0, 10)\n      };\n      return report;\n    }\n    downloadCSV(report) {\n      const rows = [['ReportID', 'GeneratedDate', 'CostAnalysis', 'SafetyPerformance', 'DowntimeHours'], [report.reportID, report.generatedDate, String(report.metrics.costAnalysis), String(report.metrics.safetyPerformance), String(report.metrics.downtimeHours)]];\n      const csv = rows.map(r => r.join(',')).join('\\n');\n      return new Blob([csv], {\n        type: 'text/csv;charset=utf-8;'\n      });\n    }\n    static {\n      this.ɵfac = function ReportsService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ReportsService)(i0.ɵɵinject(i1.MaintenanceService), i0.ɵɵinject(i2.AuditService));\n      };\n    }\n    static {\n      this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n        token: ReportsService,\n        factory: ReportsService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return ReportsService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}